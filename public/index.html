<!-- <!DOCTYPE html> -->
<html lang="en">
  <head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- <link rel="shortcut icon" href="img/favicon.ico"> -->
  

 <link rel="stylesheet" href="dish.css">

  <title>Homemade food</title>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->


  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
  
  <!-- VueJS Scripts -->
  <script src="https://unpkg.com/vue/dist/vue.min.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <!-- Custonm JS -->
  <script src="index.js" defer></script>
</head>
<body>
  <div id="vue-app">     
    <header class="header">
      <div class="">
        <nav class="navbar  navbar-dark bg-dark">
          <div >
            <ul  class="nav">
              <li class="nav-item" ><a class="target1 nav-link" href="/#/">Home</a></li>
              <li class="nav-item"><a class="target1 nav-link" href="/#/dishes">Menu</a></li>
            </ul>
          </div>     
          <div class="nav">
            <span > <a class="target1 nav-link" href="/#/signup"><i class="fa fa-user-plus"></i></a></span>
            <span > <a class="target1 nav-link" href="/#/login"><i class="fa fa-sign-in"></i></a></span>
            <span > <a class="target1 nav-link" href="/#/logout"><i class="fa fa-sign-out"></i></a></span>
            <span > <a class="target1 nav-link" href="/#/carted_dishes"><i class="fa fa-shopping-cart"></i></a></span>
            <span > <a class="target1 nav-link" href="/#/current_user"><i class="fa fa-user-circle"></i></a></span>
          </div>
        </nav>
      </div>
    </header>   


    <router-view></router-view>

  <footer class="main-footer">
    <div class="bg-dark">
      <span><p class="copyright">&copy; 2018 <a  href="#" target="_blank">Irina Kochetkova</a>All rights reserved.</p></span>
    </div>    
  </footer>

  </div>
</body>
</html>

<template id="home-page">
  <div class="vue-component">
    <div class="container">
    <div  class="img-top">
       <div class="font-top">

         <h3 >Welcome to the world of homemade food</h3><br>
         <h4 >Are you a chef or a customer?</h4><br>
       </div>
       <div align="center"> 
         <a href="/#/signup"><button class="sign">SignUp</button></a>
         <a href="/#/login"><button class="sign">LogIn</button></a>
       </div>
     </div> 
    </div>
  </div>
</template>

<template id="signup-page">
  <div class="vue-component">
   <div class="block">
    <div class="container">
      <div class="block-header">
        <h4>New account</h4>
      </div>
      <div class="block-body" >
      <div class="row"> 
        <div class="col-6">
          <p class="lead"><strong>Do you want to use this web site to sell your food?</strong></p>
        </div>
        <div class="col-6">
          <p class="lead"><strong>Do you want to use this web site to buy homemade food?</strong></p>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <p class="lead">Create your account as a chef and choose the “chef” option.</p>
        </div>  
        <div class="col-6">      
          <p class="lead">Create your account as a customer and choose the “customer” option.</p>
        </div>
      </div>
        <hr>

      <ul>
        <li class="text-danger" v-for="error in errors">{{ error }}</li>
      </ul>
      <div class="form-group">
        <label>First Name:</label> 
        <input type="text" class="form-control" v-model="first_name">
      </div>
      <div class="form-group">
        <label>Last Name:</label> 
        <input type="text" class="form-control" v-model="last_name">
      </div>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" class="form-control" v-model="email">
      </div>
      <div class="form-group">
        <label>Photo:</label>
        <input type="text" class="form-control" v-model="image_url">
      </div>
      <div class="form-group">
        <label>Phone Number:</label>
        <input type="text" class="form-control" v-model="phone_number">
      </div>
      <div class="form-group">
        <label>Zipcode:</label>
        <input type="text" class="form-control" v-model="zipcode">
      </div>
      <div class="form-group">
        <label>Password:</label>
        <input type="password" class="form-control" v-model="password">
      </div>
      <div class="form-group">
        <label>Password confirmation:</label>
        <input type="password" class="form-control" v-model="passwordConfirmation">
      </div>
      <div class="col-6 ">
        <label class="form-label">Chef:
        <input type="radio" name="provider"  value="true" v-model="provider"></label>
        <label class="form-label">Customer:
        <input type="radio" name="provider" value="false" v-model="provider"></label>
      </div>
      <div class="form-group text-center">
      <button class="sign-new" v-on:click="submit()">Signup</button>
      </div><br>
    </div>
    </div>
   </div> 
  </div>
</template>

<template id="login-page">
  <div class="vue-component">
    <div class="container">
      <div class="block">
        <div class="block-header">
          <h4>Login</h4>
        </div>      
        <ul>
          <li class="text-danger" v-for="error in errors">{{ error }}</li>
        </ul>
        <div class="block-body">
          <div class="form-group">
            <label>Email:</label>
            <input type="email" class="form-control" v-model="email">
          </div>
          <div class="form-group">
            <label>Password:</label>
            <input type="password" class="form-control" v-model="password">
          </div>
          <div class="text-center">
            <button class="sign-new " v-on:click="submit()">Login</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template id="profile-show-page">
  <div class="vue-component">
    <div class="container block">
      <div class="padding-small ">
        <h2>Your profile</h2>
      </div>
      <div >
        <div class="row">
          <div class="col-xl-3 col-lg-4 mb-md-5">
            <div class="customer-profile">
              <a href="#" class="d-inline-block">
                <img :src="current_user.image_url" class="img-user img-fluid rounded-circle customer-image"></a>
                <h5 class="name-user">{{current_user.first_name}} {{current_user.last_name}}</h5>
                <p class="text-muted text-small">email: {{ current_user.email }}</p>
                <p class="text-muted text-small">zipcode: {{ current_user.zipcode }}</p>
                <p class="text-muted text-small">phone number: {{ current_user.phone_number }}</p>
            </div>
            <div>
              <nav class="list-group customer-nav">
                <div v-if="current_user.provider === true">
                  <a href="/#/dishes/new" class="list-group-item d-flex justify-content-between align-items-center"><span><span class="fa fa-glass"></span>Create new Dish</span></a>
                 <!--  <a href="/#/dishes" class="list-group-item d-flex justify-content-between align-items-center"><span><span class="fa fa-glass" ></span>Your dishes</span></a> -->
                </div>
                <div v-if="current_user.provider === false">
                  
                  <a href="/#/index-dishes" class="list-group-item d-flex justify-content-between align-items-center"><span><span class="fa fa-shopping-cart"></span>Your cart</span></a>
                  <a href="/#/index-dishes" class="list-group-item d-flex justify-content-between align-items-center"><span><span class="fa fa-newspaper-o"></span>Your order</span></a>
                </div>
                  <a href="/#/dishes" class="list-group-item d-flex justify-content-between align-items-center"><span><span class="fa fa-glass"></span>Menu</span></a>
                  <a href="/#/logout" class="list-group-item d-flex justify-content-between align-items-center"><span><span class="fa fa-sign-out"></span>Logout</span></a>
                  <a href="/#/current_user/delete" class="list-group-item d-flex justify-content-between align-items-center"><span><span class="fa fa-user-times"></span>Delete account</span></a>
              </nav>
            </div>
          </div>

          <div class="col-lg-8 col-xl-9 pl-lg-3">
            <div class="block-header mb-5">
              <h5 class="change-password">Change password</h5>
            </div>
            <div class="content-block">
              <div class="row">
              </div>
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label  class="form-label">New password</label>
                    <input  type="password" class="form-control" v-model="password">
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">Retype new password</label>
                    <input  type="password" class="form-control" v-model="passwordConfirmation">
                  </div>
                </div>
              </div>
              <div class="text-center">
                <button type="submit" class="sign-new" v-on:click="submit()">Change password</button>
              </div>
            </div>
            <div class="block-header mb-5">
              <h5>Personal details</h5>
            </div>
            <div class="content-block">
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-control" v-model="first_name">
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">Last Name</label>
                    <input  type="text" class="form-control" v-model="last_name">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="text" class="form-control" v-model="email">
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">Photo</label>
                    <input type="text" class="form-control" v-model="image_url">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="text" class="form-control" v-model="phone_number">
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="form-group">
                    <label class="form-label">ZIP</label>
                    <input type="text" class="form-control" v-model="zipcode">
                  </div>
                </div>
              </div>
              <div class="text-center">
                <button type="submit" class="sign-new" v-on:click="submit()">Save</button>
              </div>
            </div>
          </div>
        </div>
         
      </div>   
    </div>
  </div>
</template>

<template id="profile-delete-page">
  <div class="vue-component">
  </div>
</template>

<template id="dish-index-page">
  <div class="vue-component">
    <div class="container">
      <div class="block">      

        <!-- filter -->
        <div class="row padding-small">

        <!-- cuisine -->
          <div class="col-xl-6 col-md-6 ">
            <div class="cuisine">
              <button class="sign-new"  v-on:click="toggle()">Choose cuisine here</button>
              <div class="hidden" id="categories">      
              <hr>     
                <button type="button"  class="btn" v-for="category in categories" v-on:click="categoryFilter(category)">{{ category.title }}</button>
                <div align="center">
                  <button  type="button"  class=" btn" v-on:click="categoryFilter('all')">All cuisine</button>        
                </div>
                <hr>
              </div>
            </div>
          </div>
        <!-- end  cuisin -->  


       <!-- currentUserDishes -->
         <div class="col-xl-6 col-md-6 ">
           <div class="cuisine">
             <button class="sign-new"  v-on:click="toggleDish()">Your dishes, {{ current_user.first_name}}</button>
             <div class="hidden" id="userDishes">      
             <hr>     
               <button type="button"  class="btn" v-for="current_user" v-on:click="dishFilter(current_user)"> {{ current_user.first_name}}`s Dishes</button>
               <div align="center">
                 <button  type="button"  class=" btn" v-on:click="dishFilter('all')">All dishes</button>        
               </div>
               <hr>
             </div>
           </div>
         </div>
         <!-- end currentUserDishes -->
       </div>
       <!-- end filter -->
       

        <!-- Search form -->
        <div class="section-search padding-small">
          <div class="input-group">
            <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
            <input type="text" class="form-control" placeholder="Search dish here" aria-label="Search" v-model="nameDishFilter"/>
          </div>
        </div><br>
       <!-- end search form -->
 


        <div class="row ">
          <div v-for="dish in dishes" class="col-xl-4 col-md-6" v-if="isValidDish(dish)"> 
            <div class=" is-gray">                       
              <div class="ribbon text-uppercase">
                <a v-on:click="setCurrentDish(dish)"  data-toggle="modal" data-target="#exampleModalCenter">More info</a> 
              </div>
              <img :src="dish.image_url" alt="product" class="img-fluid">                          
              <div class="text-muted cuisine2 text-small">Cuisine: {{ dish.category.title }}</div>
              <div class="text-muted chef text-small" >Chef: {{ dish.user.first_name }}</div>
              <h3 class=" text-uppercase text-middle" >{{ dish.name }}</h3>
              <div class=" text-middle price text-muted">${{  dish.price }}</div>
            </div>
          </div>
        </div>
    

        <!-- Modal -->

        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">{{ currentDish.name }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <img class="img-fluid"  :src="currentDish.image_url" alt="Card image cap">
                <p>{{ currentDish.description }} </p>     
              </div>
              <div class="modal-footer">
                
                <div class="form-inline">
                  <div v-if="currentDish.user_id === current_user.id">  
                    <a :href="'/#/dishes/' + currentDish.id + '/edit'"><button   type="button"  class="sign">Edit Dish</button></a>    
                    <a :href="'/#/dishes/' + currentDish.id + '/delete'"><button type="button" class="sign">Delete Dish</button></a>
                  </div>   
                    <div v-if="current_user.provider === false"> 
  <!-- <ul>
          <li class="text-danger" v-for="error in errors">{{ error }}</li>
        </ul>   -->  
                    <input  type="number"  v-model="quantity" class="form-control"  placeholder="Quantity">
                    <a href="/#/carted_dishes/new"><button v-on:click="submit()" type="button" data-dismiss="modal" data-backdrop="false" class="sign">Add to cart</button></a>    
                  </div>                                                     
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="sign" data-dismiss="modal">Close</button>                
              </div>
            </div>
          </div>
        </div>
        <!-- end Modal -->

      </div>
    </div>
  </div>
</template>

<template id="dishes-new-page">
  <div class="vue-component">
    <div class="container block">
      <div>
      <h1>New Dish</h1>
        <ul>
          <li class="text-danger" v-for="error in errors">{{ error }}</li>
        </ul>
        <div class="form-group">
            <label>Name:</label> 
            <input type="text" class="form-control" v-model="name">
          </div> 
           <div class="form-group">
            <label>Price:</label>
            <input  type="decimal" class="form-control" v-model="price">
          </div>
          <div class="form-group">
            <label>Description:</label>
            <input type="text" class="form-control" v-model="description">
          </div>
          <div class="edit-font">
            <label>Cuisine:</label>
            <div class="form-group">           
              <input type="text" class="form-control" v-model="category_id" list="titles">
              <datalist id="titles">
                <option v-for="category in categories"> {{ category.id + " " + category.title }}</option>
              </datalist>
            </div>
          </div>
          <div class="form-group">
            <label>Image:</label>
            <input type="text" class="form-control" v-model="image_url">
          </div>
          <button class="sign-new" v-on:click="submit()">Submit</button>       
      </div>
    </div>
  </div>
</template>

<template id="dishes-edit-page">
  <div class="vue-component">
    <div class="container block">
      <div>
        <h1>Edit Dish</h1>
        <ul>
          <li class="text-danger" v-for="error in errors">{{ error }}</li>
        </ul>
        <div class="form-group">
          <label>Name:</label> 
          <input type="text" class="form-control" v-model="name">
        </div>
        <div class="form-group">
          <label>Price:</label>
          <input type="decimal" class="form-control" v-model="price">
        </div>
        <div class="form-group">
          <label>Description:</label>
          <input type="text" class="form-control" v-model="description">
        </div>
        <div>  
          <label>Cuisine:</label>
          <div class="form-group">       
            <input type="text" class="form-control"  v-model="category_id" list="titles" >
            <datalist id="titles">
              <option v-for="category in categories">{{ category.id + " " + category.title }}</option>
            </datalist>
          </div>
        </div>
      <div class="form-group">
        <label>Image:</label>
        <input type="text"  class="form-control" v-model="image_url">
      </div>      
      <button class="sign-new" data-dismiss="modal" data-backdrop="false" v-on:click="submit()">Submit</button>
      </div>
    </div>
  </div>
</template>

<template id="dishes-delete-page">
  <div class="vue-component">
  </div>
</template>

<template id="carted_dish-index-page">
  <div class="vue-component">
    <div class="container">
      <div class="padding-small">
        <h3>Shopping cart</h3>
      </div>
    </div>
     <div class="container block">
      <div class="basket-body">
        <div class="basket">
          <div class="basket-holder">
            <div class="container">
              <table id="customers">
                <thead>
                  <tr>
                    <th id="dish">Dish</th>
                    <th id="price">Price</th>
                    <th id="quantity">Quantity</th>
                    <th id="subtotal">Subtotal</th>
                    <th id="remove">Remove</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="carted_dish in carted_dishes">

                    <td><img :src="carted_dish.dish.image_url"  alt="..." class="img-fluid img-carted"><br>{{ carted_dish.dish.name }}</td>
                    <td>${{ carted_dish.dish.price }}</td>
                    <td>{{ carted_dish.quantity }}</td>
                    <td>{{ carted_dish.subtotal_carted }}</td>
                    <td><a :href="'/#/carted_dishes/' + carted_dish.id + '/delete'"><button type="button" class="btn-remove" ><i class="fa fa-trash"></i></button></a></td>        
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class=" basket-check">
        <div class="d-flex carted justify-content-md-end"><a href="/#/dishes" class="sign">Continue Shopping</a><a href="/#/orders" class="sign" v-on:click="checkout()">Checkout</a></div>
      </div>
    </div>
  </div> 
</template>

<template id="cartedDishes-delete-page">
  <div class="vue-component">
     <a href="/#/carted_dishes">Back to your cart</a>
  </div>
</template>

<template id="orders-index-page">
  <div class="vue-component">
    <div class="container">
      <div class="padding-small">
        <h3>Orders</h3>
      </div>        
      <div class="container">
        <table id="customers">
          <thead>
            <tr>
              <th>Order</th>
              <th>Subtotal</th>
              <th>Tax</th>
              <th>Total</th>
              <th>Cancel</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="order in orders">
              <td> #{{ order.id }}</td>
              <td>{{ order.subtotal }}</td>
              <td>{{ order.tax }}</td>
              <td>{{ order.total }}</td>
              <td><a :href="'/#/orders/' + order.id + '/delete'"><button type="button" class="btn-remove" ><i class="fa fa-trash"></i></button></a></td>        
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</template>

<template id="orders-delete-page">
  <div class="vue-component">
    <a href="/#/orders">Back to orders</a>
  </div>
</template>





